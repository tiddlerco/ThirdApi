加锁
1.setnx：独占排他 死锁、不可重入，原子性
2. setkv ex 30 nx：独占排他、死锁 不可重入
3.hash + Lua脚本：可重入锁
   1判断锁是否被占用(exists），如果没有被占用则直接获取锁(hset/hincrby）并设置过期时间
   (expire)
   2.如果锁被占用，则判断是否当前线程占用的 (hexists)，如果是则重入(hinciby）并重置过期时间
   (expire)
   3.否则获取锁失败，在代码中重试
   4.Timer定时器+lua脚本：实现锁的自动续期
   判断锁是否自己的锁(hexists == 1)
   ，如果是自己的锁则执行expire重置过期时间 


解锁

1.del：导致误删
2.先判断再删除同时保证原子性：lua脚本
3. hash +lua脚本：可重入
   1.判断当前线程的锁是否存在，不存在则返回nll，抛出异常
   2.存在则直接减1 (hincrby-1) ，判断减1后的值是否为0，为0则释放锁 (del)，并返回1
   3.不为0,则返回0
